<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æ¯æ—¥ä¸­å¤®å¤§å­¸åƒä»€éº¼</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 50px; background: #f2f2f2; }
    #reward-box {
      font-size: 28px;
      margin-top: 30px;
      padding: 20px;
      border: 3px dashed #4CAF50;
      background: #fff;
      border-radius: 15px;
      min-height: 60px;
      animation: none;
    }
    .animate {
      animation: spin-pop 0.8s ease forwards;
    }
    @keyframes spin-pop {
      0% { transform: rotate(0deg) scale(1); }
      40% { transform: rotate(10deg) scale(1.3); }
      70% { transform: rotate(-10deg) scale(1.2); }
      100% { transform: rotate(0deg) scale(1); }
    }
    button {
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
    }
    button:hover { background-color: #45a049; }
    select {
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      margin-bottom: 20px;
    }
    .youtube-promo, .orcid-section {
      margin-top: 60px;
      font-size: 18px;
    }
    .youtube-promo a, .orcid-section a {
      color: #d90000;
      font-weight: bold;
      text-decoration: none;
    }
    iframe {
      margin-top: 20px;
      border: none;
      border-radius: 12px;
    }
  </style>
</head>
<body>
  <h1>ğŸ½ æ¯æ—¥ä¸­å¤®å¤§å­¸åƒä»€éº¼</h1>
  <p>ä»Šå¤©è¦åƒå“ªè£¡ï¼Ÿé¸æ“‡åœ°å€å¾Œï¼ŒæŒ‰ä¸‹ã€Œå¤©é¸æŒ‰æ­¤ã€ï¼</p>

  <select id="location-select">
    <option value="campus">æ ¡å…§</option>
    <option value="night">å®µå¤œè¡—</option>
    <option value="back">å¾Œé–€</option>
  </select>
  <br>
  <button onclick="spinFood()">å¤©é¸æŒ‰æ­¤</button>
  <div id="reward-box"></div>

  <div class="youtube-promo">
    ğŸ“º æƒ³çœ‹æ›´å¤šå­¸è¡“èˆ‡ç”Ÿæ´»éˆæ„Ÿï¼Ÿä¾†æˆ‘çš„é »é“ååï¼š<br>
    <a href="https://www.youtube.com/@Billin888" target="_blank">@Billin888 - é»æˆ‘è¨‚é–± ğŸ””</a>
    <div>
      <iframe width="360" height="215" src="https://www.youtube.com/embed?listType=user_uploads&list=Billin888" allowfullscreen></iframe>
    </div>
  </div>

  <div class="orcid-section">
    ğŸ§¬ æŸ¥çœ‹æˆ‘çš„ ORCID å­¸è¡“å±¥æ­·ï¼š<br>
    <a href="https://orcid.org/0000-0003-3299-1809" target="_blank">https://orcid.org/0000-0003-3299-1809</a>
  </div>

  <script>
    const SHEET_ID = '1euvwDf1lE08u8viByS0g3rAULuM3JJHbN04740qywQQ';
    const SHEET_NAME = 'åº—å®¶åå–®';
    const API_URL = `https://opensheet.elk.sh/${SHEET_ID}/${SHEET_NAME}`;

    let foodData = {};

    fetch(API_URL)
      .then(res => res.json())
      .then(data => {
        foodData = data.reduce((acc, row) => {
          const loc = row['åœ°å€ä»£ç¢¼ï¼ˆlocationï¼‰'];
          const name = row['é¡¯ç¤ºåç¨±ï¼ˆåº—åï¼‰'];
          if (!acc[loc]) acc[loc] = [];
          acc[loc].push(name);
          return acc;
        }, {});
      })
      .catch(err => {
        console.error('è¼‰å…¥é¤å»³è³‡æ–™å¤±æ•—ï¼š', err);
      });

    function speak(text) {
      if ('speechSynthesis' in window) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'zh-TW';
        msg.rate = 1.3;
        window.speechSynthesis.speak(msg);
      }
    }

    function spinFood() {
      const location = document.getElementById('location-select').value;
      const box = document.getElementById('reward-box');
      const options = foodData[location] || [];
      if (options.length === 0) {
        box.textContent = "å°šæœªè¼‰å…¥é¤é»é¸é …æˆ–æ­¤å€æ²’æœ‰è³‡æ–™";
        return;
      }
      box.textContent = "å¤©é¸ä¸­... ğŸ²";
      box.classList.remove('animate');

      setTimeout(() => {
        const selected = options[Math.floor(Math.random() * options.length)];
        box.textContent = `ğŸ½ ä»Šæ—¥æ¨è–¦ï¼š${selected}`;
        box.classList.add('animate');
        speak(`ä»Šå¤©æ¨è–¦åƒï¼š${selected}`);
      }, 1000);
    }
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1477776427047351"
  crossorigin="anonymous"></script>
</body>
</html>
