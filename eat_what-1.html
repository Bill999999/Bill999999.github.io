<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æ¯æ—¥ä¸­å¤®å¤§å­¸åƒä»€éº¼</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 50px; background: #f2f2f2; }
    #reward-box {
      font-size: 28px;
      margin-top: 30px;
      padding: 20px;
      border: 3px dashed #4CAF50;
      background: #fff;
      border-radius: 15px;
      min-height: 60px;
      transition: transform 0.4s ease;
    }
    .animate {
      animation: pop 0.5s ease;
    }
    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    button {
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
    }
    button:hover { background-color: #45a049; }
    select {
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>ğŸ½ æ¯æ—¥ä¸­å¤®å¤§å­¸åƒä»€éº¼</h1>
  <p>ä»Šå¤©è¦åƒå“ªè£¡ï¼Ÿé¸æ“‡åœ°å€å¾Œï¼ŒæŒ‰ä¸‹ã€Œå¤©é¸æŒ‰æ­¤ã€ï¼</p>

  <select id="location-select">
    <option value="campus">æ ¡å…§</option>
    <option value="night">å®µå¤œè¡—</option>
    <option value="back">å¾Œé–€</option>
  </select>
  <br>
  <button onclick="spinFood()">å¤©é¸æŒ‰æ­¤</button>
  <div id="reward-box"></div>

  <script>
    const SHEET_ID = '1euvwDf1lE08u8viByS0g3rAULuM3JJHbN04740qywQQ';
    const SHEET_NAME = 'åº—å®¶åå–®';
    const API_URL = `https://opensheet.elk.sh/${SHEET_ID}/${SHEET_NAME}`;

    let foodData = {};

    fetch(API_URL)
      .then(res => res.json())
      .then(data => {
        foodData = data.reduce((acc, row) => {
          const loc = row['åœ°å€ä»£ç¢¼ï¼ˆlocationï¼‰'];
          const name = row['é¡¯ç¤ºåç¨±ï¼ˆåº—åï¼‰'];
          if (!acc[loc]) acc[loc] = [];
          acc[loc].push(name);
          return acc;
        }, {});
      })
      .catch(err => {
        console.error('è¼‰å…¥é¤å»³è³‡æ–™å¤±æ•—ï¼š', err);
      });

    function speak(text) {
      if ('speechSynthesis' in window) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'zh-TW';
        window.speechSynthesis.speak(msg);
      }
    }

    function spinFood() {
      const location = document.getElementById('location-select').value;
      const box = document.getElementById('reward-box');
      const options = foodData[location] || [];
      if (options.length === 0) {
        box.textContent = "å°šæœªè¼‰å…¥é¤é»é¸é …æˆ–æ­¤å€æ²’æœ‰è³‡æ–™";
        return;
      }
      box.textContent = "å¤©é¸ä¸­... ğŸ²";
      box.classList.remove('animate');

      setTimeout(() => {
        const selected = options[Math.floor(Math.random() * options.length)];
        box.textContent = `ğŸ½ ä»Šæ—¥æ¨è–¦ï¼š${selected}`;
        box.classList.add('animate');
        speak(`ä»Šå¤©æ¨è–¦åƒï¼š${selected}`);
      }, 1000);
    }
  </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1477776427047351"
    crossorigin="anonymous"></script>
</body>
</html>